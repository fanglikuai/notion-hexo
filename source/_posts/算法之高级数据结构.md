---
categories: 算法
tags:
  - 差分
sticky: ''
description: ''
permalink: ''
title: 算法之高级数据结构
date: '2025-09-14 17:39:00'
cover: 'https://prod-files-secure.s3.us-west-2.amazonaws.com/143cad91-961b-48b0-82dc-78fbb6eb5abe/ca363e5c-5600-40ff-b012-b0478d3f0da0/wallhaven-rrv6r7.jpg?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466ZF2HVST6%2F20250918%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20250918T180043Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEEkaCXVzLXdlc3QtMiJIMEYCIQCzX2OsExSMtIQE0tSxHsTb7vFOfrERNpH73al6I2WTlwIhALL7iPLSirKOuR7w63NIX7ooX%2FvvtqFTcC7XLxcV2QE%2FKogECML%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEQABoMNjM3NDIzMTgzODA1IgzrUrdRHoZsPDpRqfwq3AM90W0lO6jhy7NAwLb3Qfo6Ho1U3J89JNpnKzxl6hrmMqYmm3AvVrGKKDerhy9GbA2JFZusE11fDyd4pAuxKTol80S3wgpYfFRHDUPHS0aT4jtRw55PnKsIuiHvZvRk5VE7igsyjE1prNp790nSFh2C8vll%2B8N%2F3%2BFZ%2BheCXQyAJh6wWfIntMMwMNX3cNSwubxOsxS%2BCOSypOoFbM%2BdKXGhYZdLjUglXakffLefYuCXBlV0ggAtSoWVIIcYqA%2FP4Cz%2Fd3oO0BsWJ9EjY9YFKk1TPGvx6voMgLInOVSB%2FnmTtf%2ButiBRMCyUG3%2BtMUWhtPpoA1xqiq2thmwkq0AwBJK9U2osdSUryIyXA7K%2F5RVYYNXnIQvVSpmQ8281WbR%2Fs6hBOyxhTWbgQhYlP0c491Rf7eGYnlfzKFl92pJ6lDcST3Zwc9ql6d7OYPB75f%2BKazxOzuIe6paWbMXVIE3loD2h5x4WIePD6V96Swch7ir71mTmLHXEL1DBlzb6SbrX9QoTlOkefq2UqdMbfA%2Bi1sdWLcoVuH9ElkZHMoLXdAOlm6t7ChO3LM4k7Od4izWtQZnkLVVLFxqeBOhdQ36mJDPnSsggeyQ5yHy80%2BOOggdIqbSV%2FSh4Pn2PyhvgdTC9%2BbDGBjqkAT74r%2Fzp8TS2mqLzowBALjmIcNhuLgWlVV2lPlQW06hs2Lff%2BNgNstDnNkDPOcH8L%2BEWTTtVEdNvDFXDWQEaiUOpucde7DS2r9HQvY2zW9BWzE4Jd%2BSWctOUGjKEsZ0afgHNV9u2Fws5ILPp%2FJSQnIYmbgjiWnPiVSE2nVNSmhilmUHPJJndDK96OWlIRB%2BV9PKeZJcvoAuGwHODknAS6N70nAIQ&X-Amz-Signature=7d30d6473fd4a810f5c40900671ccef07e310b4af2b698cee85919b6d68d8315&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject'
updated: '2025-09-16 14:05:00'
index_img: /images/29b54b65025b3e4040090a170b32ab80.jpg
banner_img: /images/29b54b65025b3e4040090a170b32ab80.jpg
---
> 在笔试中，对于一些比较难的题，需要使用的一些数据结构

# 差分数据


主要用途：某个区间修改，然后进行查询


## 基本介绍


差分数组是将原数组中后一个元素减去前一个元素的差值构成一个新的数组。例如，假设原数组为 arr = `[7, 1, 5, 6, 3, 2, 4, 8]`，那么差分数组就是 diff =`[7, -6, 4, 1, -3, -1, 2, 4]`。


**构建差分数组：**


```java
int[] nums = new int[]{7, 1, 5, 6, 3, 2, 4, 8};
int len = nums.length;
int[] diff = new int[len];
diff[0] = nums[0];
for (int i = 1; i < len; i++) {
    diff[i] = nums[i] - nums[i - 1];
}
```

- 差分数组的第一位就是数组的第一位
- 然后后面就是数组的后一位减去前一位

对数组进行区间的更新：


```java
diff[1]+=1;diff[4]-=1;
```


从区间的左边进行增加，区间的右边进行减少（左闭右开，不包含最后一位）

> 原数组：[7, **1, 5, 6**, 3, 2, 4, 8]
>
> 结果：`7,**2,6,7**,3,2,4,8`
>
>

想知道某个位置的数据：


```java
// nums 是原数组，diff 是差分数组
diff[0] = nums[0];diff[1] = nums[1] - nums[0];
diff[2] = nums[2] - nums[1];
...nums[0] = diff[0];
nums[1] = diff[1] + nums[0] =  diff[0] + diff[1];
nums[2] = nums[1] + diff[2] =  diff[0] + diff[1] + diff[2];
```


```java
int cur = 0;
for (int i = 0; i < len; i++) {
    cur += diff[i];
    System.out.print(cur + ",");
}
```


就是找一个数存起来，然后累加即可

